ATTINY Notes -*- mode: org -*-
#+STARTUP: showall


#+attr_html: :width 600
[[./attiny85.jpg]]

* TIMSK - Timer Interrupt Mask Register

|-------+--------------------------------------------------|
| OCIE0 |                                                  |
|-------+--------------------------------------------------|
| TOIE0 | Overflow interrupt                               |
|       | Calls ISR(TIMER0_OVF_vect){} when TCNT0 overflow |
|-------+--------------------------------------------------|

* DDRB - Port B Data Direction Register

|------+------+------+------+------+------|
| DDB5 | DDB4 | DDB3 | DDB2 | DDB1 | DDB0 |
|------+------+------+------+------+------|

* PORTB - Port B Data Register

|--------+--------+--------+--------+--------+--------|
| PORTB5 | PORTB4 | PORTB3 | PORTB2 | PORTB1 | PORTB0 |
|--------+--------+--------+--------+--------+--------|

* TCCR0 - Timer 0 Counter Control Register (8bit)
** Counter Select -  set timer prescaler

|------+------+------+---------------|
| CS02 | CS01 | CS00 | Prescaler     |
|------+------+------+---------------|
|    0 |    0 |    0 | Timer stopped |
|    0 |    0 |    1 | /1            |
|    0 |    1 |    0 | /8            |
|    0 |    1 |    1 | /64           |
|    1 |    0 |    0 | /256          |
|    1 |    0 |    1 | /102          |
|------+------+------+---------------|

** Wave Form Generation

|-------+-------+-------------------|
| WGM00 | WGM01 | Mode              |
|-------+-------+-------------------|
|     0 |     0 | Normal            |
|     0 |     1 | PWM Phase Correct |
|     1 |     0 | CTC               |
|     1 |     1 | Fast PWM          |
|-------+-------+-------------------|

TCNT0 - counter
OCR0A - stationary threshold
OC0A - output from compare
OCR0B - stationary threshold
OC0B - output from compare

  
* TCCR1 - Timer 1 Counter Control Register (16bit)

|------+-------+--------+--------+------+------+------+------|
| CTC1 | PWM1A | COM1A1 | COM1A0 | CS13 | CS12 | CS11 | CS10 |
|------+-------+--------+--------+------+------+------+------|

CTC1 - clear TCNT1 on compare match with OCR1C
PWM1A - enable PWM mode using OCR1A, reset on compare match with OCR1C
COM1A1/COM1A0 - determine output behavior of OC1A on compare match with OCR1A
:Settings:
|--------+--------+-----------------------------------|
| COM1A1 | COM1A0 | Mode                              |
|--------+--------+-----------------------------------|
|      0 |      0 | Comparator A disconnect from OC1A |
|      0 |      1 | Toggle OC1A                       |
|      1 |      0 | Clear 0C1A                        |
|      1 |      1 | Set OC1A                          |
|--------+--------+-----------------------------------|
:END:

TCNT1 - counter

* Timer modes
** Normal
Timer counts up to max value.  Resets only at MAX.
** CTC - Clear Timer to Compare Match
Timer is cleared when TCNT* (timer count) passes 0CR* (output compare)
** Fast PWM
Timer counts up to TOP then resets to BOTTOM.
** Waveform Generation
